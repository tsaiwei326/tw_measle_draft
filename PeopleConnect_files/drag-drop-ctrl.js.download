var dragNDropController = angular.module('dragNDropController', ['ui.bootstrap']);

dragNDropController.controller('dragNDropCtrl', [ '$rootScope', '$scope', '$uibModal', '$document', 'Alertify', 'ToolsService',
function ($rootScope, $scope, $uibModal, $document, Alertify, ToolsService) {

    var self = $scope;
    var root = $rootScope;  

    // set up sortable options
    self.sortableOptions = {
        stop: function (e, ui) {
            console.log('done sorting')
            // do something here
        }
    };

    self.myFilter = function () {
        console.log('hit filters')
    }

    self.save = function (event, ui) {
        self.$apply();
        

        
        // turn click events off for group icons
        angular.element(".group--wrapper").off();
        
        var toolWidgetMasterScope = self.$parent.$parent;

        var params = {
            userTableAutogeneratedId: toolWidgetMasterScope.user.id
        }

        setTimeout(function () {

            ToolsService.saveOrder(params, root._myTools).then(function (response) {

            })

        }, 300)
        
        

        /*
        data = {
            userTableAutogeneratedId : '1'
            draggedAutoGeneratedId : 'toolId',
            draggedSortOrder : 'toolSort',
            droppedAutoGeneratedId : 'toolId',
            droppedSortOrder : 'sortOrder'
        }
        */

    }
    /**/
}]);
